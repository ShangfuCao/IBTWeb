{"ast":null,"code":"import _objectSpread from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfu\\u2019s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';import{IfcViewerAPI}from'web-ifc-viewer';import{Backdrop,CircularProgress,IconButton}from'@material-ui/core';import React from'react';import Dropzone from'react-dropzone';import BcfDialog from'./components/BcfDialog';//Icons\nimport FolderOpenOutlinedIcon from'@material-ui/icons/FolderOpenOutlined';import CropIcon from'@material-ui/icons/Crop';//import FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Threedviewer=/*#__PURE__*/function(_React$Component){_inherits(Threedviewer,_React$Component);var _super=_createSuper(Threedviewer);function Threedviewer(props){var _this;_classCallCheck(this,Threedviewer);_this=_super.call(this,props);_this.state={bcfDialogOpen:false,loaded:false,loading_ifc:false};_this.onDrop=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(files){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading_ifc:true});_context.next=3;return _this.viewer.IFC.loadIfc(files[0],true);case 3:_this.setState({loaded:true,loading_ifc:false});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleToggleClipping=function(){_this.viewer.clipper.active=!_this.viewer.clipper.active;};_this.handleClickOpen=function(){_this.dropzoneRef.current.open();};_this.handleOpenBcfDialog=function(){_this.setState(_objectSpread(_objectSpread({},_this.state),{},{bcfDialogOpen:true}));};_this.handleCloseBcfDialog=function(){_this.setState(_objectSpread(_objectSpread({},_this.state),{},{bcfDialogOpen:false}));};_this.handleOpenViewpoint=function(viewpoint){_this.viewer.currentViewpoint=viewpoint;};_this.dropzoneRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Threedviewer,[{key:\"componentDidMount\",value:function componentDidMount(){var container=document.getElementById('viewer-container');var viewer=new IfcViewerAPI({container:container});viewer.addAxes();viewer.addGrid();viewer.IFC.setWasmPath('../../');this.viewer=viewer;window.onmousemove=viewer.prepickIfcItem;window.ondblclick=viewer.addClippingPlane;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BcfDialog,{open:this.state.bcfDialogOpen,onClose:this.handleCloseBcfDialog,onOpenViewpoint:this.handleOpenViewpoint}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',height:'100vh'},children:[/*#__PURE__*/_jsxs(\"aside\",{style:{width:50},children:[/*#__PURE__*/_jsx(IconButton,{onClick:this.handleClickOpen,children:/*#__PURE__*/_jsx(FolderOpenOutlinedIcon,{})}),/*#__PURE__*/_jsx(IconButton,{onClick:this.handleToggleClipping,children:/*#__PURE__*/_jsx(CropIcon,{})})]}),/*#__PURE__*/_jsx(Dropzone,{ref:this.dropzoneRef,onDrop:this.onDrop,children:function children(_ref2){var getRootProps=_ref2.getRootProps,getInputProps=_ref2.getInputProps;return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},getRootProps({className:'dropzone'})),{},{children:/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps()))}));}}),/*#__PURE__*/_jsx(\"div\",{style:{flex:'1 1 auto',minWidth:0},children:/*#__PURE__*/_jsx(\"div\",{id:\"viewer-container\",style:{position:'relative',height:'100%',width:'100%'}})})]}),/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:100,display:\"flex\",alignItems:\"center\",alignContent:\"center\"},open:this.state.loading_ifc,children:/*#__PURE__*/_jsx(CircularProgress,{})})]});}}]);return Threedviewer;}(React.Component);export default Threedviewer;","map":{"version":3,"sources":["/Users/shangfualexcao/Dropbox (Personal)/My Mac (Shangfuâ€™s MacBook Pro)/Documents/GitHub/IBT-Web/frontend/src/Threedviewer.js"],"names":["IfcViewerAPI","Backdrop","CircularProgress","IconButton","React","Dropzone","BcfDialog","FolderOpenOutlinedIcon","CropIcon","Threedviewer","props","state","bcfDialogOpen","loaded","loading_ifc","onDrop","files","setState","viewer","IFC","loadIfc","handleToggleClipping","clipper","active","handleClickOpen","dropzoneRef","current","open","handleOpenBcfDialog","handleCloseBcfDialog","handleOpenViewpoint","viewpoint","currentViewpoint","createRef","container","document","getElementById","addAxes","addGrid","setWasmPath","window","onmousemove","prepickIfcItem","ondblclick","addClippingPlane","display","flexDirection","height","width","getRootProps","getInputProps","className","flex","minWidth","position","zIndex","alignItems","alignContent","Component"],"mappings":"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","sourcesContent":["import './App.css';\nimport { IfcViewerAPI } from 'web-ifc-viewer';\nimport { Backdrop, CircularProgress, IconButton } from '@material-ui/core';\nimport React from 'react';\nimport Dropzone from 'react-dropzone';\nimport BcfDialog from './components/BcfDialog';\n\n//Icons\nimport FolderOpenOutlinedIcon from '@material-ui/icons/FolderOpenOutlined';\nimport CropIcon from '@material-ui/icons/Crop';\n//import FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\n\nclass Threedviewer extends React.Component {\n\n    state = {\n        bcfDialogOpen: false,\n        loaded: false,\n        loading_ifc: false\n    };\n\n    constructor(props) {\n        super(props);\n        this.dropzoneRef = React.createRef();\n    }\n\n    componentDidMount() {\n        const container = document.getElementById('viewer-container');\n        const viewer = new IfcViewerAPI({container});\n        viewer.addAxes();\n        viewer.addGrid();\n        viewer.IFC.setWasmPath('../../');\n\n        this.viewer = viewer;\n\n        window.onmousemove = viewer.prepickIfcItem;\n        window.ondblclick = viewer.addClippingPlane\n    }\n\n    onDrop = async (files) => {\n        this.setState({ loading_ifc: true })\n        await this.viewer.IFC.loadIfc(files[0], true);\n        this.setState({ loaded: true, loading_ifc: false })\n    };\n\n    handleToggleClipping = () => {\n        this.viewer.clipper.active = !this.viewer.clipper.active;\n    };\n\n    handleClickOpen = () => {\n        this.dropzoneRef.current.open();\n    };\n\n    handleOpenBcfDialog = () => {\n        this.setState({\n            ...this.state,\n            bcfDialogOpen: true\n        });\n    };\n\n    handleCloseBcfDialog = () => {\n        this.setState({\n            ...this.state,\n            bcfDialogOpen: false\n        });\n    };\n\n    handleOpenViewpoint = (viewpoint) => {\n        this.viewer.currentViewpoint = viewpoint;\n    };\n\n    render() {\n        return (\n          <>\n              <BcfDialog\n                open={this.state.bcfDialogOpen}\n                onClose={this.handleCloseBcfDialog}\n                onOpenViewpoint={this.handleOpenViewpoint}\n              />\n              <div style={{ display: 'flex', flexDirection: 'row', height: '100vh' }}>\n                  <aside style={{ width: 50 }}>\n                      <IconButton onClick={this.handleClickOpen}>\n                          <FolderOpenOutlinedIcon />\n                      </IconButton>\n                      <IconButton onClick={this.handleToggleClipping}>\n                          <CropIcon />\n                      </IconButton>\n                    {/*  <IconButton onClick={this.handleOpenBcfDialog}>\n                          <FeedbackOutlinedIcon />\n                      </IconButton>*/}\n                  </aside>\n                  <Dropzone ref={this.dropzoneRef} onDrop={this.onDrop}>\n                      {({ getRootProps, getInputProps }) => (\n                        <div {...getRootProps({ className: 'dropzone' })}>\n                            <input {...getInputProps()} />\n                        </div>\n                      )}\n                  </Dropzone>\n                  <div style={{ flex: '1 1 auto', minWidth: 0 }}>\n                      <div id='viewer-container' style={{ position: 'relative', height: '100%', width: '100%' }} />\n                  </div>\n              </div>\n              <Backdrop\n                style={{\n                    zIndex: 100,\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    alignContent: \"center\"\n                }}\n                open={this.state.loading_ifc}\n              >\n                  <CircularProgress/>\n              </Backdrop>\n          </>\n        );\n    }\n}\n\nexport default Threedviewer;\n"]},"metadata":{},"sourceType":"module"}