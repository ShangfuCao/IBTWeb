{"ast":null,"code":"var _jsxFileName = \"/Users/shangfualexcao/Desktop/examples-1/simple-react/src/Threedviewer.js\";\nimport './App.css';\nimport { IfcViewerAPI } from 'web-ifc-viewer';\nimport { Backdrop, CircularProgress, IconButton } from '@material-ui/core';\nimport React from 'react';\nimport Dropzone from 'react-dropzone';\nimport BcfDialog from './components/BcfDialog'; //Icons\n\nimport FolderOpenOutlinedIcon from '@material-ui/icons/FolderOpenOutlined';\nimport CropIcon from '@material-ui/icons/Crop'; //import FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Threedviewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bcfDialogOpen: false,\n      loaded: false,\n      loading_ifc: false\n    };\n\n    this.onDrop = async files => {\n      this.setState({\n        loading_ifc: true\n      });\n      await this.viewer.IFC.loadIfc(files[0], true);\n      this.setState({\n        loaded: true,\n        loading_ifc: false\n      });\n    };\n\n    this.handleToggleClipping = () => {\n      this.viewer.clipper.active = !this.viewer.clipper.active;\n    };\n\n    this.handleClickOpen = () => {\n      this.dropzoneRef.current.open();\n    };\n\n    this.handleOpenBcfDialog = () => {\n      this.setState({ ...this.state,\n        bcfDialogOpen: true\n      });\n    };\n\n    this.handleCloseBcfDialog = () => {\n      this.setState({ ...this.state,\n        bcfDialogOpen: false\n      });\n    };\n\n    this.handleOpenViewpoint = viewpoint => {\n      this.viewer.currentViewpoint = viewpoint;\n    };\n\n    this.dropzoneRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    const container = document.getElementById('viewer-container');\n    const viewer = new IfcViewerAPI({\n      container\n    });\n    viewer.addAxes();\n    viewer.addGrid();\n    viewer.IFC.setWasmPath('../../');\n    this.viewer = viewer;\n    window.onmousemove = viewer.prepickIfcItem;\n    window.ondblclick = viewer.addClippingPlane;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(BcfDialog, {\n        open: this.state.bcfDialogOpen,\n        onClose: this.handleCloseBcfDialog,\n        onOpenViewpoint: this.handleOpenViewpoint\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          height: '100vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          style: {\n            width: 50\n          },\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: this.handleClickOpen,\n            children: /*#__PURE__*/_jsxDEV(FolderOpenOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: this.handleToggleClipping,\n            children: /*#__PURE__*/_jsxDEV(CropIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Dropzone, {\n          ref: this.dropzoneRef,\n          onDrop: this.onDrop,\n          children: _ref => {\n            let {\n              getRootProps,\n              getInputProps\n            } = _ref;\n            return /*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n                className: 'dropzone'\n              }),\n              children: /*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: '1 1 auto',\n            minWidth: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"viewer-container\",\n            style: {\n              position: 'relative',\n              height: '100%',\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n        style: {\n          zIndex: 100,\n          display: \"flex\",\n          alignItems: \"center\",\n          alignContent: \"center\"\n        },\n        open: this.state.loading_ifc,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Threedviewer;","map":{"version":3,"sources":["/Users/shangfualexcao/Desktop/examples-1/simple-react/src/Threedviewer.js"],"names":["IfcViewerAPI","Backdrop","CircularProgress","IconButton","React","Dropzone","BcfDialog","FolderOpenOutlinedIcon","CropIcon","Threedviewer","Component","constructor","props","state","bcfDialogOpen","loaded","loading_ifc","onDrop","files","setState","viewer","IFC","loadIfc","handleToggleClipping","clipper","active","handleClickOpen","dropzoneRef","current","open","handleOpenBcfDialog","handleCloseBcfDialog","handleOpenViewpoint","viewpoint","currentViewpoint","createRef","componentDidMount","container","document","getElementById","addAxes","addGrid","setWasmPath","window","onmousemove","prepickIfcItem","ondblclick","addClippingPlane","render","display","flexDirection","height","width","getRootProps","getInputProps","className","flex","minWidth","position","zIndex","alignItems","alignContent"],"mappings":"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","sourcesContent":["import './App.css';\nimport { IfcViewerAPI } from 'web-ifc-viewer';\nimport { Backdrop, CircularProgress, IconButton } from '@material-ui/core';\nimport React from 'react';\nimport Dropzone from 'react-dropzone';\nimport BcfDialog from './components/BcfDialog';\n\n//Icons\nimport FolderOpenOutlinedIcon from '@material-ui/icons/FolderOpenOutlined';\nimport CropIcon from '@material-ui/icons/Crop';\n//import FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\n\nclass Threedviewer extends React.Component {\n\n    state = {\n        bcfDialogOpen: false,\n        loaded: false,\n        loading_ifc: false\n    };\n\n    constructor(props) {\n        super(props);\n        this.dropzoneRef = React.createRef();\n    }\n\n    componentDidMount() {\n        const container = document.getElementById('viewer-container');\n        const viewer = new IfcViewerAPI({container});\n        viewer.addAxes();\n        viewer.addGrid();\n        viewer.IFC.setWasmPath('../../');\n\n        this.viewer = viewer;\n\n        window.onmousemove = viewer.prepickIfcItem;\n        window.ondblclick = viewer.addClippingPlane\n    }\n\n    onDrop = async (files) => {\n        this.setState({ loading_ifc: true })\n        await this.viewer.IFC.loadIfc(files[0], true);\n        this.setState({ loaded: true, loading_ifc: false })\n    };\n\n    handleToggleClipping = () => {\n        this.viewer.clipper.active = !this.viewer.clipper.active;\n    };\n\n    handleClickOpen = () => {\n        this.dropzoneRef.current.open();\n    };\n\n    handleOpenBcfDialog = () => {\n        this.setState({\n            ...this.state,\n            bcfDialogOpen: true\n        });\n    };\n\n    handleCloseBcfDialog = () => {\n        this.setState({\n            ...this.state,\n            bcfDialogOpen: false\n        });\n    };\n\n    handleOpenViewpoint = (viewpoint) => {\n        this.viewer.currentViewpoint = viewpoint;\n    };\n\n    render() {\n        return (\n          <>\n              <BcfDialog\n                open={this.state.bcfDialogOpen}\n                onClose={this.handleCloseBcfDialog}\n                onOpenViewpoint={this.handleOpenViewpoint}\n              />\n              <div style={{ display: 'flex', flexDirection: 'row', height: '100vh' }}>\n                  <aside style={{ width: 50 }}>\n                      <IconButton onClick={this.handleClickOpen}>\n                          <FolderOpenOutlinedIcon />\n                      </IconButton>\n                      <IconButton onClick={this.handleToggleClipping}>\n                          <CropIcon />\n                      </IconButton>\n                    {/*  <IconButton onClick={this.handleOpenBcfDialog}>\n                          <FeedbackOutlinedIcon />\n                      </IconButton>*/}\n                  </aside>\n                  <Dropzone ref={this.dropzoneRef} onDrop={this.onDrop}>\n                      {({ getRootProps, getInputProps }) => (\n                        <div {...getRootProps({ className: 'dropzone' })}>\n                            <input {...getInputProps()} />\n                        </div>\n                      )}\n                  </Dropzone>\n                  <div style={{ flex: '1 1 auto', minWidth: 0 }}>\n                      <div id='viewer-container' style={{ position: 'relative', height: '100%', width: '100%' }} />\n                  </div>\n              </div>\n              <Backdrop\n                style={{\n                    zIndex: 100,\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    alignContent: \"center\"\n                }}\n                open={this.state.loading_ifc}\n              >\n                  <CircularProgress/>\n              </Backdrop>\n          </>\n        );\n    }\n}\n\nexport default Threedviewer;\n"]},"metadata":{},"sourceType":"module"}