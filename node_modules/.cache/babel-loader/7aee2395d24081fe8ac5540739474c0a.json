{"ast":null,"code":"var _jsxFileName = \"/Users/shangfualexcao/Desktop/IBT/src/components/BcfDialog.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useDropzone } from 'react-dropzone';\nimport { useCallback, useEffect, useState } from 'react';\nimport { BcfReader } from '@parametricos/bcf-js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport { Box, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Typography } from '@material-ui/core';\nimport ifcfile from '../../src/Denman.ifc';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 140\n  }\n});\nexport default function BcfDialog(props) {\n  _s();\n\n  const {\n    onOpenViewpoint,\n    ...rest\n  } = props;\n  const [file, setFile] = useState(ifcfile);\n  const [topics, setTopics] = useState([]);\n\n  const handleOpenViewpoint = viewpoint => {\n    onOpenViewpoint(viewpoint);\n    props.onClose();\n  };\n\n  const onDrop = useCallback(async acceptedFiles => {\n    const reader = new BcfReader();\n    await reader.read(acceptedFiles[0]);\n    setTopics(reader.topics);\n    setFile(acceptedFiles[0]);\n  }, []);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: \".bcf\"\n  });\n  const fitleredTopics = topics.filter(t => t.viewpoints.length > 0);\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    maxWidth: \"xl\",\n    fullWidth: true,\n    disableBackdropClick: true,\n    ...rest,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: \"BCF Viewer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      children: [!file && /*#__PURE__*/_jsxDEV(Box, {\n        height: 600,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        border: isDragActive ? \"solid 4px\" : \"none\",\n        borderColor: isDragActive ? \"#ffa50f\" : \"\",\n        borderRadius: 20,\n        ...getRootProps(),\n        children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), isDragActive ? /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Drop the BCF here ...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Drag 'n' drop a BCF here, or click to select\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), file && /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: fitleredTopics.map((topic, i) => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(TopicCard, {\n            topic: topic,\n            onOpenViewpoint: handleOpenViewpoint\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 23\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: props.onClose,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 7\n  }, this);\n}\n\n_s(BcfDialog, \"fOwY3GPkD8eKjcPyahd7P/7B65c=\", false, function () {\n  return [useDropzone];\n});\n\n_c = BcfDialog;\n\nfunction TopicCard(props) {\n  _s2();\n\n  var _topic$markup, _topic$markup$viewpoi;\n\n  const classes = useStyles();\n  const {\n    topic,\n    onOpenViewpoint\n  } = props;\n  const defaultViewpoint = (topic === null || topic === void 0 ? void 0 : (_topic$markup = topic.markup) === null || _topic$markup === void 0 ? void 0 : (_topic$markup$viewpoi = _topic$markup.viewpoints) === null || _topic$markup$viewpoi === void 0 ? void 0 : _topic$markup$viewpoi.length) > 0 ? topic.markup.viewpoints[0] : null;\n  const [defaultViewpointUrl, setDefaultViewpointUrl] = useState(\"\");\n\n  const handleClick = () => {\n    if (topic.viewpoints.length > 0) {\n      onOpenViewpoint(topic.viewpoints[0]);\n    }\n  };\n\n  useEffect(() => {\n    const getViewpoint = async () => {\n      if (defaultViewpoint) {\n        const data = await topic.getViewpointSnapshot(defaultViewpoint);\n        const url = window.URL.createObjectURL(data);\n        setDefaultViewpointUrl(url);\n      }\n    };\n\n    getViewpoint();\n  }, [defaultViewpoint, topic]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(CardActionArea, {\n      onClick: handleClick,\n      children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n        className: classes.media,\n        image: defaultViewpointUrl,\n        title: topic.markup.topic.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          variant: \"h5\",\n          component: \"h2\",\n          children: topic.markup.topic.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"textSecondary\",\n          component: \"p\",\n          children: topic.markup.topic.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 7\n  }, this);\n}\n\n_s2(TopicCard, \"EWrCWwh6p/Kq+5/CUZH/S7jKX7k=\", false, function () {\n  return [useStyles];\n});\n\n_c2 = TopicCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BcfDialog\");\n$RefreshReg$(_c2, \"TopicCard\");","map":{"version":3,"sources":["/Users/shangfualexcao/Desktop/IBT/src/components/BcfDialog.js"],"names":["useDropzone","useCallback","useEffect","useState","BcfReader","makeStyles","Card","CardActionArea","CardContent","CardMedia","Button","Box","Dialog","DialogActions","DialogContent","DialogTitle","Grid","Typography","ifcfile","useStyles","root","maxWidth","media","height","BcfDialog","props","onOpenViewpoint","rest","file","setFile","topics","setTopics","handleOpenViewpoint","viewpoint","onClose","onDrop","acceptedFiles","reader","read","getRootProps","getInputProps","isDragActive","accept","fitleredTopics","filter","t","viewpoints","length","map","topic","i","TopicCard","classes","defaultViewpoint","markup","defaultViewpointUrl","setDefaultViewpointUrl","handleClick","getViewpoint","data","getViewpointSnapshot","url","window","URL","createObjectURL","title","description"],"mappings":"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","sourcesContent":["import { useDropzone } from 'react-dropzone';\nimport { useCallback, useEffect, useState } from 'react';\nimport { BcfReader } from '@parametricos/bcf-js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport { Box, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Typography } from '@material-ui/core';\nimport ifcfile from '../../src/Denman.ifc'\n\nconst useStyles = makeStyles({\n    root: {\n        maxWidth: 345,\n    },\n    media: {\n        height: 140,\n    },\n});\n\n\n\n\nexport default function BcfDialog(props) {\n\n    const { onOpenViewpoint, ...rest } = props;\n\n    const [file, setFile] = useState(ifcfile);\n    const [topics, setTopics] = useState([]);\n\n    const handleOpenViewpoint = (viewpoint) => {\n        onOpenViewpoint(viewpoint);\n        props.onClose()\n    }\n\n    const onDrop = useCallback(async (acceptedFiles) => {\n        const reader = new BcfReader();\n        await reader.read(acceptedFiles[0]);\n        setTopics(reader.topics);\n        setFile(acceptedFiles[0])\n    }, []);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop, accept: \".bcf\" });\n\n    const fitleredTopics = topics.filter((t) => t.viewpoints.length > 0);\n\n    return (\n      <Dialog maxWidth='xl' fullWidth disableBackdropClick {...rest}>\n          <DialogTitle>BCF Viewer</DialogTitle>\n          <DialogContent>\n              {!file && (\n                <Box\n                  height={600}\n                  display='flex'\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                  border={isDragActive ? \"solid 4px\" : \"none\" }\n                  borderColor={isDragActive ? \"#ffa50f\" : \"\" }\n                  borderRadius={20}\n                  {...getRootProps()}\n                >\n                    <input {...getInputProps()} />\n                    {\n                        isDragActive ?\n                          <Typography variant=\"h6\">Drop the BCF here ...</Typography> :\n                          <Typography variant=\"h6\">Drag 'n' drop a BCF here, or click to select</Typography>\n                    }\n                </Box>\n              )}\n              {file && (\n                <Grid container spacing={2}>\n                    {fitleredTopics.map((topic, i) => (\n                      <Grid key={i} item>\n                            <TopicCard topic={topic} onOpenViewpoint={handleOpenViewpoint} />\n                      </Grid>\n                    ))}\n                </Grid>\n              )}\n          </DialogContent>\n          <DialogActions>\n              <Button onClick={props.onClose}>\n                  Close\n              </Button>\n          </DialogActions>\n      </Dialog>\n    );\n}\n\nfunction TopicCard(props){\n\n    const classes = useStyles();\n\n    const { topic, onOpenViewpoint } = props;\n\n    const defaultViewpoint = topic?.markup?.viewpoints?.length > 0 ? topic.markup.viewpoints[0] : null;\n\n    const [defaultViewpointUrl, setDefaultViewpointUrl] = useState(\"\");\n\n    const handleClick = () => {\n        if(topic.viewpoints.length > 0) {\n            onOpenViewpoint(topic.viewpoints[0]);\n        }\n    }\n\n    useEffect(() => {\n        const getViewpoint = async () => {\n            if(defaultViewpoint){\n                const data = await topic.getViewpointSnapshot(defaultViewpoint);\n                const url = window.URL.createObjectURL(data);\n                setDefaultViewpointUrl(url);\n            }\n        }\n        getViewpoint()\n    }, [defaultViewpoint, topic]);\n\n    return (\n      <Card className={classes.root}>\n          <CardActionArea onClick={handleClick}>\n              <CardMedia\n                className={classes.media}\n                image={defaultViewpointUrl}\n                title={topic.markup.topic.title}\n              />\n              <CardContent>\n                  <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                      {topic.markup.topic.title}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                      {topic.markup.topic.description}\n                  </Typography>\n              </CardContent>\n          </CardActionArea>\n          {/*<CardActions>\n              <Button size=\"small\" color=\"primary\">\n                  Open\n              </Button>\n              <Button size=\"small\" color=\"primary\">\n                  Learn More\n              </Button>\n          </CardActions>*/}\n      </Card>\n    )\n}"]},"metadata":{},"sourceType":"module"}